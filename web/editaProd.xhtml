<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             template="index.xhtml"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:body>
        <h:form>
            <center><h1 style="font-family: monospace" class="page-header">Lista de Produtos!</h1>
                <h:inputHidden value="#{produtoBean.produtoSelecionado.idProduto}"/>
                <h:dataTable  styleClass="table table-hover" value="#{produtoBean.lista}"
                              var="produto" rendered="#{not empty produtoBean.lista}" style="font-family: monospace" 
                              id="tabela">

                    <h:column>
                        <f:facet name="header" >Descrição</f:facet>
                        <h:outputText value="#{produto.descricao}" />
                    </h:column>

                    <h:column>
                        <f:facet name="header" >Valor</f:facet>
                        <h:outputText value="#{produto.valor}" />
                    </h:column>

                    <h:column>
                        <f:facet name="header" >Estoque</f:facet>
                        <h:outputText value="#{produto.estoque}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header" >Edição</f:facet>
                        <h:commandLink action="#{produtoBean.deletar}" onclick="if (!confirm('Deseja realmente \n\
                    excluir o produto #{produto.descricao}?'))
                                return false;" title="Deletar" >

                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                            <f:setPropertyActionListener target="#{produtoBean.produtoSelecionado}" value="#{produto}" rendered="@form"/>
                        </h:commandLink>
                        <h:commandLink   action="#{produtoBean.redireciona()}" title="Editar">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                            <f:setPropertyActionListener target="#{produtoBean.produtoSelecionado}" value="#{produto}" />
                        </h:commandLink>

                    </h:column>

                </h:dataTable>  
            </center>
        </h:form>
    </h:body>
</ui:decorate>

